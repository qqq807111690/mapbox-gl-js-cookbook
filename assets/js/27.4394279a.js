(window.webpackJsonp=window.webpackJsonp||[]).push([[27,51],{235:function(t,e){},57:function(t,e,n){},61:function(t,e,n){"use strict";var i=n(57);n.n(i).a},62:function(t,e,n){"use strict";n.r(e);n(68),n(69),n(67),n(31);var i=n(75),a=n.n(i),o=n(72),s=n.n(o),r=(n(76),n(73)),l=n(74),c=function(){function t(e){Object(r.a)(this,t),this._className="mapboxgl-ctrl",this._options=Object.assign({},{zoom:1,center:[0,0]},e),this._onClickHome=this._onClickHome.bind(this)}return Object(l.a)(t,[{key:"onAdd",value:function(t){return this._map=t,this._container=p.create("div","".concat(this._className," mapboxgl-ctrl-group")),this._render(),this._container}},{key:"onRemove",value:function(){p.remove(this._container),this._map=void 0}},{key:"_render",value:function(){var t=p.create("button","".concat(this._className,"-icon ").concat(this._className,"-home"),this._container);t.type="button",t.addEventListener("click",this._onClickHome)}},{key:"_onClickHome",value:function(){this._map.easeTo(this._options)}}]),t}(),p={create:function(t,e,n){var i=window.document.createElement(t);return void 0!==e&&(i.className=e),n&&n.appendChild(i),i},remove:function(t){t.parentNode&&t.parentNode.removeChild(t)}},d=(n(77),{name:"base-map",props:{height:{type:Number,default:520},mapOptions:{type:Object},mapClickable:{type:Boolean,default:!0},borderOptions:{type:Object}},data:function(){return{map:null,maploaded:!1,mapDefaultOptions:{container:a()(),style:"mapbox://styles/huanglii/ck1n985b20oan1cmhp4i0o9c9?optimize=true",center:[-74.5,40],zoom:6,minZoom:0,maxZoom:22,scrollZoom:!0,pitch:0,bearing:0,antialias:!1},borderDefaultOptions:{layout:{visibility:"none"},paint:{"line-color":"hsl(357, 67%, 60%)","line-opacity":["step",["zoom"],1,10,0],"line-width":["interpolate",["linear"],["zoom"],0,1,22,3]},beforeId:""}}},computed:{mapContainer:function(){return this.mapOptions.container||this.mapDefaultOptions.container}},mounted:function(){var t=Object.assign({},this.mapDefaultOptions,this.mapOptions);this.initMap(t),window.addEventListener("resize",this.resize)},methods:{initMap:function(t){s.a.accessToken="pk.eyJ1IjoiaHVhbmdsaWkiLCJhIjoiY2pzNHBtendwMDZ2ZDQzbnVmZXdtMDlvdiJ9.GSija86yNNR4ssBtFFpx0g",this.map=new s.a.Map(t),this.map.addControl(new s.a.NavigationControl,"top-left");var e=t.center,n=t.zoom;this.map.addControl(new c({center:e,zoom:n}),"bottom-left"),this.map.addControl(new s.a.FullscreenControl,"top-left"),this.map.on("load",this.handleMapLoaded)},handleMapLoaded:function(t){this.maploaded=!0,this.$emit("load",t.target),this.mapClickable&&this.map.on("click",this.handleMapClick)},handleMapClick:function(t){console.log(t.lngLat);var e=this.map.queryRenderedFeatures(t.point);if(e.length>0){var n=e[0],i=n.layer,a=n.properties;Object.keys(a).length>0&&(new s.a.Popup).setLngLat(t.lngLat).setHTML(this.createPropHtml(i.id,a)).addTo(this.map)}},createPropHtml:function(t,e){return'\n        <div class="title"><b>'.concat(t,'</b></div>\n        <div class="content">\n          ').concat(Object.keys(e).map(function(t){return"".concat("<p><b>".concat(t,": </b>").concat(e[t],"</p>"))}).join(""),"\n        </div>\n      ")},addBorderLayer:function(){var t=Object.assign({},this.borderDefaultOptions,this.borderOptions),e=t.layout,n=t.paint,i=t.beforeId;this.map.addSource("border",{type:"vector",url:"mapbox://huanglii.4nxu8jv0"}),this.map.addLayer({id:"border-2oej0r",source:"border","source-layer":"Border-2oej0r",type:"line",layout:e,paint:n},i||void 0)},resize:function(){this.map.resize()}}}),u=(n(61),n(0)),m=Object(u.a)(d,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"map-wrapper"},[e("div",{style:{width:"100%",height:this.height+"px",borderRadius:"6px"},attrs:{id:this.mapContainer}},[this._t("custom")],2),this._v(" "),this.maploaded?this._t("default"):this._e()],2)},[],!1,null,null,null);e.default=m.exports},658:function(t,e,n){"use strict";n.r(e);var i=n(62),a=(n(484),n(603)),o=n(623),s=n(204),r=n(187),l=n(207),c=n(625),p=n(626),d={BUILDINGS:"https://uber.osgis.cn/uber-common/deck.gl-data/master/examples/trips/buildings.json",TRIPS:"https://uber.osgis.cn/uber-common/deck.gl-data/master/examples/trips/trips-v7.json"},u=new o.a({color:[255,255,255],intensity:1}),m=new s.a({color:[255,255,255],intensity:2,position:[-74.05,40.7,8e3]}),h=new r.a({ambientLight:u,pointLight:m}),f={buildingColor:[74,80,87],trailColor0:[253,128,93],trailColor1:[23,184,190],material:new a.a({ambient:.1,diffuse:.6,shininess:32,specularColor:[60,64,70]}),effects:[h]},b={longitude:-74,latitude:40.72,zoom:13,pitch:45,bearing:0},g=[[[-74,40.7],[-74.02,40.7],[-74.02,40.72],[-74,40.72]]];var v={components:{baseMap:i.default},data:function(){return{mapOptions:{style:"mapbox://styles/huanglii/ck1ocwsbl1fja1cloy67tyefi?optimize=true",center:[-74,40.72],zoom:13,pitch:45,bearing:0},canvasId:"trips-canvas"}},methods:{handleMapLoaded:function(t){!function(t,e){var n=d.BUILDINGS,i=d.TRIPS,a=f,o=new c.a({id:"ground",data:g,getPolygon:function(t){return t},stroked:!1,getFillColor:[0,0,0,0]}),s=new c.a({id:"buildings",data:n,extruded:!0,wireframe:!1,opacity:.5,getPolygon:function(t){return t.polygon},getElevation:function(t){return t.height},getFillColor:a.buildingColor,material:a.material}),r=new p.a({id:"trips",data:i,getPath:function(t){return t.path},getTimestamps:function(t){return t.timestamps},getColor:function(t){return 0===t.vendor?a.trailColor0:a.trailColor1},opacity:.3,widthMinPixels:2,rounded:!0,trailLength:180,currentTime:1,shadowEnabled:!1}),u=new l.a({canvas:e,id:e,width:"100%",height:"100%",style:{postion:"relative",top:"0px"},initialViewState:b,controller:!0,onViewStateChange:function(e){var n=e.viewState;t.jumpTo({center:[n.longitude,n.latitude],zoom:n.zoom,bearing:n.bearing,pitch:n.pitch})},effects:a.effects,layers:[r,o,s]});!function t(){var e=Date.now()/1e3%60/60*1800,n={};Object.assign(n,r.props,{currentTime:e,data:i});var a=[new p.a(n),o,s];u.setProps({layers:a}),window.requestAnimationFrame(t)}()}(t,this.canvasId)}}},y=n(0),w=Object(y.a)(v,function(){var t=this.$createElement,e=this._self._c||t;return e("base-map",{attrs:{"map-options":this.mapOptions},on:{load:this.handleMapLoaded}},[e("canvas",{staticStyle:{"z-index":"2"},attrs:{slot:"custom",id:this.canvasId},slot:"custom"})])},[],!1,null,null,null);e.default=w.exports}}]);