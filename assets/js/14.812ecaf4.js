(window.webpackJsonp=window.webpackJsonp||[]).push([[14,51],{108:function(e,t,i){"use strict";var n=i(4);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},113:function(e,t,i){var n=i(17),o=i(70)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,i,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?i:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},128:function(e,t,i){"use strict";var n=i(113),o=RegExp.prototype.exec;e.exports=function(e,t){var i=e.exec;if("function"==typeof i){var a=i.call(e,t);if("object"!=typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},129:function(e,t,i){"use strict";i(138);var n=i(16),o=i(15),a=i(5),s=i(18),r=i(70),l=i(94),c=r("species"),u=!a(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();e.exports=function(e,t,i){var p=r(e),h=!a(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),f=h?!a(function(){var t=!1,i=/a/;return i.exec=function(){return t=!0,null},"split"===e&&(i.constructor={},i.constructor[c]=function(){return i}),i[p](""),!t}):void 0;if(!h||!f||"replace"===e&&!u||"split"===e&&!d){var g=/./[p],v=i(s,p,""[e],function(e,t,i,n,o){return t.exec===l?h&&!o?{done:!0,value:g.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}}),m=v[0],x=v[1];n(String.prototype,e,m),o(RegExp.prototype,p,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}}},138:function(e,t,i){"use strict";var n=i(94);i(32)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},235:function(e,t){},287:function(e,t,i){"use strict";var n=i(58),o=i(59),a=i(64),s=i(63),r=i(87),l=i(65),c=i(133),u=i(143),d=i(668),p=i(426),h=i(479);i.d(t,"a",function(){return m});var f=d.a.fp64LowPart,g=[0,0,0,255],v={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,fp64:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:g},getLineColor:{type:"accessor",value:g},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},m=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"getShaders",value:function(e){return{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  float outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity) / 255.;\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:4,transition:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var i=e.props,n=e.oldProps,o=e.changeFlags;if(Object(r.a)(Object(s.a)(t.prototype),"updateState",this).call(this,{props:i,oldProps:n,changeFlags:o}),i.fp64!==n.fp64){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,i=this.context.viewport,n=this.props,o=n.radiusScale,a=n.radiusMinPixels,s=n.radiusMaxPixels,r=n.stroked,l=n.filled,c=n.lineWidthUnits,u=n.lineWidthScale,d=n.lineWidthMinPixels,p=n.lineWidthMaxPixels,h="pixels"===c?i.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},t,{stroked:r?1:0,filled:l,radiusScale:o,radiusMinPixels:a,radiusMaxPixels:s,lineWidthScale:u*h,lineWidthMinPixels:d,lineWidthMaxPixels:p})).draw()}},{key:"_getModel",value:function(e){return new p.a(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new h.a({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(e,t){var i=t.startRow,n=t.endRow,o=this.use64bitPositions();if(e.constant=!o,o){var a=this.props,s=a.data,r=a.getPosition,l=e.value,u=i*e.size,d=Object(c.a)(s,i,n),p=d.iterable,h=d.objectInfo,g=!0,v=!1,m=void 0;try{for(var x,y=p[Symbol.iterator]();!(g=(x=y.next()).done);g=!0){var b=x.value;h.index++;var P=r(b,h);l[u++]=f(P[0]),l[u++]=f(P[1])}}catch(e){v=!0,m=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw m}}}else e.value=new Float32Array(2)}}]),t}(u.a);m.layerName="ScatterplotLayer",m.defaultProps=v},482:function(e,t,i){"use strict";var n=i(4),o=i(483),a=i(128);i(129)("search",1,function(e,t,i,s){return[function(i){var n=e(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,n):new RegExp(i)[t](String(n))},function(e){var t=s(i,e,this);if(t.done)return t.value;var r=n(e),l=String(this),c=r.lastIndex;o(c,0)||(r.lastIndex=0);var u=a(r,l);return o(r.lastIndex,c)||(r.lastIndex=c),null===u?-1:u.index}]})},483:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},57:function(e,t,i){},61:function(e,t,i){"use strict";var n=i(57);i.n(n).a},62:function(e,t,i){"use strict";i.r(t);i(68),i(69),i(67),i(31);var n=i(75),o=i.n(n),a=i(72),s=i.n(a),r=(i(76),i(73)),l=i(74),c=function(){function e(t){Object(r.a)(this,e),this._className="mapboxgl-ctrl",this._options=Object.assign({},{zoom:1,center:[0,0]},t),this._onClickHome=this._onClickHome.bind(this)}return Object(l.a)(e,[{key:"onAdd",value:function(e){return this._map=e,this._container=u.create("div","".concat(this._className," mapboxgl-ctrl-group")),this._render(),this._container}},{key:"onRemove",value:function(){u.remove(this._container),this._map=void 0}},{key:"_render",value:function(){var e=u.create("button","".concat(this._className,"-icon ").concat(this._className,"-home"),this._container);e.type="button",e.addEventListener("click",this._onClickHome)}},{key:"_onClickHome",value:function(){this._map.easeTo(this._options)}}]),e}(),u={create:function(e,t,i){var n=window.document.createElement(e);return void 0!==t&&(n.className=t),i&&i.appendChild(n),n},remove:function(e){e.parentNode&&e.parentNode.removeChild(e)}},d=(i(77),{name:"base-map",props:{height:{type:Number,default:520},mapOptions:{type:Object},mapClickable:{type:Boolean,default:!0},borderOptions:{type:Object}},data:function(){return{map:null,maploaded:!1,mapDefaultOptions:{container:o()(),style:"mapbox://styles/huanglii/ck1n985b20oan1cmhp4i0o9c9?optimize=true",center:[-74.5,40],zoom:6,minZoom:0,maxZoom:22,scrollZoom:!0,pitch:0,bearing:0,antialias:!1},borderDefaultOptions:{layout:{visibility:"none"},paint:{"line-color":"hsl(357, 67%, 60%)","line-opacity":["step",["zoom"],1,10,0],"line-width":["interpolate",["linear"],["zoom"],0,1,22,3]},beforeId:""}}},computed:{mapContainer:function(){return this.mapOptions.container||this.mapDefaultOptions.container}},mounted:function(){var e=Object.assign({},this.mapDefaultOptions,this.mapOptions);this.initMap(e),window.addEventListener("resize",this.resize)},methods:{initMap:function(e){s.a.accessToken="pk.eyJ1IjoiaHVhbmdsaWkiLCJhIjoiY2pzNHBtendwMDZ2ZDQzbnVmZXdtMDlvdiJ9.GSija86yNNR4ssBtFFpx0g",this.map=new s.a.Map(e),this.map.addControl(new s.a.NavigationControl,"top-left");var t=e.center,i=e.zoom;this.map.addControl(new c({center:t,zoom:i}),"bottom-left"),this.map.addControl(new s.a.FullscreenControl,"top-left"),this.map.on("load",this.handleMapLoaded)},handleMapLoaded:function(e){this.maploaded=!0,this.$emit("load",e.target),this.mapClickable&&this.map.on("click",this.handleMapClick)},handleMapClick:function(e){console.log(e.lngLat);var t=this.map.queryRenderedFeatures(e.point);if(t.length>0){var i=t[0],n=i.layer,o=i.properties;Object.keys(o).length>0&&(new s.a.Popup).setLngLat(e.lngLat).setHTML(this.createPropHtml(n.id,o)).addTo(this.map)}},createPropHtml:function(e,t){return'\n        <div class="title"><b>'.concat(e,'</b></div>\n        <div class="content">\n          ').concat(Object.keys(t).map(function(e){return"".concat("<p><b>".concat(e,": </b>").concat(t[e],"</p>"))}).join(""),"\n        </div>\n      ")},addBorderLayer:function(){var e=Object.assign({},this.borderDefaultOptions,this.borderOptions),t=e.layout,i=e.paint,n=e.beforeId;this.map.addSource("border",{type:"vector",url:"mapbox://huanglii.4nxu8jv0"}),this.map.addLayer({id:"border-2oej0r",source:"border","source-layer":"Border-2oej0r",type:"line",layout:t,paint:i},n||void 0)},resize:function(){this.map.resize()}}}),p=(i(61),i(0)),h=Object(p.a)(d,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"map-wrapper"},[t("div",{style:{width:"100%",height:this.height+"px",borderRadius:"6px"},attrs:{id:this.mapContainer}},[this._t("custom")],2),this._v(" "),this.maploaded?this._t("default"):this._e()],2)},[],!1,null,null,null);t.default=h.exports},630:function(e,t,i){"use strict";i.r(t);var n=i(62),o=(i(482),i(207)),a=i(287),s=i(58),r=i(59),l=i(64),c=i(63),u=i(87),d=i(65),p=i(133),h=i(143),f=i(668),g=i(426),v=i(479),m=f.a.fp64LowPart,x={fp64:!1,getSourcePosition:{type:"accessor",value:function(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function(e){return e.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0},getStrokeWidth:{deprecatedFor:"getWidth"}},y=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"getShaders",value:function(){return{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * width / 2.0;\n  vec2 offset_clipspace = project_pixel_size_to_clipspace(offset_screenspace);\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourceTargetPositions64xyLow.xy, vec3(0.));\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceSourceTargetPositions64xyLow.zw, vec3(0.));\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,transition:!0,accessor:"getTargetPosition"},instanceSourceTargetPositions64xyLow:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstanceSourceTargetPositions64xyLow},instanceColors:{size:4,type:5121,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var i=e.props,n=e.oldProps,o=e.changeFlags;if(Object(u.a)(Object(c.a)(t.prototype),"updateState",this).call(this,{props:i,oldProps:n,changeFlags:o}),i.fp64!==n.fp64){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,i=this.context.viewport,n=this.props,o=n.widthUnits,a=n.widthScale,s=n.widthMinPixels,r=n.widthMaxPixels,l="pixels"===o?i.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},t,{widthScale:a*l,widthMinPixels:s,widthMaxPixels:r})).draw()}},{key:"_getModel",value:function(e){return new g.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new v.a({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function(e,t){var i=t.startRow,n=t.endRow,o=this.use64bitPositions();if(e.constant=!o,o){var a=this.props,s=a.data,r=a.getSourcePosition,l=a.getTargetPosition,c=e.value,u=i*e.size,d=Object(p.a)(s,i,n),h=d.iterable,f=d.objectInfo,g=!0,v=!1,x=void 0;try{for(var y,b=h[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var P=y.value;f.index++;var _=r(P,f),w=l(P,f);c[u++]=m(_[0]),c[u++]=m(_[1]),c[u++]=m(w[0]),c[u++]=m(w[1])}}catch(e){v=!0,x=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw x}}}else e.value=new Float32Array(4)}}]),t}(h.a);y.layerName="LineLayer",y.defaultProps=x;var b={AIRPORTS:"https://uber.osgis.cn/uber-common/deck.gl-data/master/website/airports.json",FLIGHT_PATHS:"https://uber.osgis.cn/uber-common/deck.gl-data/master/examples/line/heathrow-flights.json"},P={latitude:47.65,longitude:7,zoom:4.5,maxZoom:16,pitch:50,bearing:0};function _(e){var t=e.start[2]/1e4;return[255*(1-2*t),128*t,255*t,255*(1-t)]}var w={components:{baseMap:n.default},data:function(){return{mapOptions:{style:"mapbox://styles/huanglii/ck1ocwsbl1fja1cloy67tyefi?optimize=true",center:[7,47.65],zoom:4.5,pitch:50,bearing:0},canvasId:"line-canvas"}},methods:{handleMapLoaded:function(e){!function(e,t){new o.a({id:t,canvas:t,width:"100%",height:"100%",style:{postion:"relative",top:"0px"},initialViewState:P,controller:!0,onViewStateChange:function(t){var i=t.viewState;e.jumpTo({center:[i.longitude,i.latitude],zoom:i.zoom,bearing:i.bearing,pitch:i.pitch})},layers:[new a.a({id:"airports",data:b.AIRPORTS,radiusScale:20,getPosition:function(e){return e.coordinates},getFillColor:[255,140,0],getRadius:function(e){return(t=e.type).search("major")>=0?100:t.search("small")>=0?30:60;var t}}),new y({id:"flight-paths",data:b.FLIGHT_PATHS,getSourcePosition:function(e){return e.start},getTargetPosition:function(e){return e.end},getColor:_,getWidth:3})]})}(e,this.canvasId)}}},C=i(0),S=Object(C.a)(w,function(){var e=this.$createElement,t=this._self._c||e;return t("base-map",{attrs:{"map-options":this.mapOptions},on:{load:this.handleMapLoaded}},[t("canvas",{staticStyle:{"z-index":"2"},attrs:{slot:"custom",id:this.canvasId},slot:"custom"})])},[],!1,null,null,null);t.default=S.exports},94:function(e,t,i){"use strict";var n,o,a=i(108),s=RegExp.prototype.exec,r=String.prototype.replace,l=s,c=(n=/a/,o=/b*/g,s.call(n,"a"),s.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(e){var t,i,n,o,l=this;return u&&(i=new RegExp("^"+l.source+"$(?!\\s)",a.call(l))),c&&(t=l.lastIndex),n=s.call(l,e),c&&n&&(l.lastIndex=l.global?n.index+n[0].length:t),u&&n&&n.length>1&&r.call(n[0],i,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n}),e.exports=l}}]);